{% extends "base.html" %}

{% block content %}
<div class="container">
    <h1 class="title">{{ title }}</h1>
    <p class="subtitle">Admin interface for booking management</p>
    
    <div class="box">
        <form method="POST">
            {{ form.hidden_tag() }}
            
            {% if form.booking_date %}
            <div class="field">
                <label class="label">{{ form.booking_date.label }}</label>
                <div class="control">
                    {{ form.booking_date(class="input") }}
                </div>
                {% for error in form.booking_date.errors %}
                    <p class="help is-danger">{{ error }}</p>
                {% endfor %}
            </div>
            {% endif %}
            
            {% if form.session %}
            <div class="field">
                <label class="label">{{ form.session.label }}</label>
                <div class="control">
                    <div class="select is-fullwidth">
                        {{ form.session(class="select") }}
                    </div>
                </div>
                {% for error in form.session.errors %}
                    <p class="help is-danger">{{ error }}</p>
                {% endfor %}
            </div>
            {% endif %}
            
            {% if form.rink_count %}
            <div class="field">
                <label class="label">{{ form.rink_count.label }}</label>
                <div class="control">
                    {{ form.rink_count(class="input") }}
                </div>
                <p class="help">Enter the number of rinks needed for this booking (1-6)</p>
                {% for error in form.rink_count.errors %}
                    <p class="help is-danger">{{ error }}</p>
                {% endfor %}
            </div>
            {% endif %}
            
            {% if form.priority %}
            <div class="field">
                <label class="label">{{ form.priority.label }}</label>
                <div class="control">
                    {{ form.priority(class="input") }}
                </div>
                {% for error in form.priority.errors %}
                    <p class="help is-danger">{{ error }}</p>
                {% endfor %}
            </div>
            {% endif %}
            
            {% if form.vs %}
            <div class="field">
                <label class="label">Opposition Team</label>
                <div class="control">
                    {{ form.vs(class="input", placeholder="e.g., Riverdale Bowls Club") }}
                </div>
                {% for error in form.vs.errors %}
                    <p class="help is-danger">{{ error }}</p>
                {% endfor %}
            </div>
            {% endif %}
            
            {% if form.home_away %}
            <div class="field">
                <label class="label">{{ form.home_away.label }}</label>
                <div class="control">
                    <div class="select is-fullwidth">
                        {{ form.home_away() }}
                    </div>
                </div>
                {% for error in form.home_away.errors %}
                    <p class="help is-danger">{{ error }}</p>
                {% endfor %}
            </div>
            {% endif %}
            
            <div class="field is-grouped">
                <div class="control">
                    <button type="submit" class="button is-primary">
                        <span class="icon">
                            <i class="fas fa-save"></i>
                        </span>
                        <span>Save Changes</span>
                    </button>
                </div>
                <div class="control">
                    <a href="{{ url_for('bookings.admin_list_bookings') }}" class="button">
                        <span class="icon">
                            <i class="fas fa-arrow-left"></i>
                        </span>
                        <span>Cancel</span>
                    </a>
                </div>
            </div>
        </form>
    </div>
    
    
    <!-- Team Management Section -->
    {% if booking %}
    <div class="box">
        <h3 class="title is-4">Team Management</h3>
        
        <!-- Display existing teams -->
        <div class="mb-5">
            <h4 class="title is-5">Current Teams ({{ teams|length }})</h4>
            {% include 'partials/_team_list_partial.html' %}
        </div>
        
        <!-- Create new team -->
        {% include 'partials/_create_team_partial.html' %}
    </div>
    {% endif %}
</div>
{% endblock %}